# 5分でわかるgeDIG

> **一言で**: geDIGは「構造コスト」と「情報利得」のバランスで、**いつ**新しい情報を受け入れるかを判断する統一ゲージです。

---

## 問題：「いつ更新するか」がわからない（30秒）

AIは「**何を**取得するか」は得意。でも「**いつ**知識を更新するか」は苦手。

```
現状のAI:
  「関連文書を10件見つけました！」
  → でも6件はノイズ
  → 知識グラフはぐちゃぐちゃに
```

**結果**: 知識の汚染、無駄な検索、不安定な動作。

---

## 直感：人間もやっていること（1分）

人間は新しい情報を聞いたとき、自然にこう考える：

1. **「今の理解に合う？」** → 構造コスト
2. **「何かわかるようになる？」** → 情報利得

例：「地球は平らだ」と言われたら
- 情報利得: 小さい（地平線の説明にはなる...かも）
- 構造コスト: **巨大**（既存知識と矛盾しまくり）
- **判断: 却下**

例：「水は海抜0mで100℃で沸騰する」と言われたら
- 情報利得: 料理の不確実性が減る
- 構造コスト: 低い（物理の知識と整合）
- **判断: 受け入れ**

**geDIGはこれを明示的・計算可能にしたもの。**

---

## 数式：シンプルな1行（1分）

```
F = 構造コスト − λ × 情報利得
```

もう少し正確に：

```
F = ΔEPC_norm − λ·(ΔH_norm + γ·ΔSP_rel)
```

| 項 | 意味 | 直感 |
|----|------|------|
| ΔEPC | 編集パスコスト | 「どれくらい変えなきゃいけない？」 |
| ΔH | エントロピー差 | 「不確実性がどれくらい減る？」 |
| ΔSP | 最短路短縮 | 「便利なショートカットができる？」 |
| λ | 温度 | 慎重さと好奇心のバランス |

**ルール: Fが小さい = 良い更新**

---

## 仕組み：2段階のゲート（1分）

2つのゲートが判断を制御：

### AG（曖昧性ゲート）—「もっと探索すべき？」
- ローカル構造がおかしいときに発火
- 発火したら: 追加検索、深掘り

### DG（決定ゲート）—「これは良い接続？」
- マルチホップ評価でショートカットを確認したら発火
- 発火したら: 更新をコミット、悪い枝を剪定

```
新情報 → [AG: 探索?] → [DG: 受入?] → グラフ更新
            ↓              ↓
        「うーん、曖昧」  「よし、これは役立つ！」
```

---

## 結果：Mazeでも、RAGでも効く（1分）

### 迷路（概念実証）
| 手法 | 成功率 | ステップ数 | 圧縮率 |
|------|--------|-----------|--------|
| ランダム | 45% | 210 | 0% |
| 貪欲法 | 92% | 85 | 0% |
| **geDIG** | **98%** | **69** | **95%** |

geDIGは効率的にゴールを見つけ、かつ最小限の地図を構築。

### RAG（HotPotQA）
| 手法 | EM | F1 | 遅延 |
|------|-----|-----|------|
| BM25 | 36.6% | 52.3% | 820ms |
| **geDIG** | **37.5%** | **53.8%** | 873ms |

geDIGは最小限のオーバーヘッドで精度向上。

---

## なぜ重要か（30秒）

geDIGは単なるアルゴリズムではない。**設計原理**である：

> **構造と情報のバランスで、いつ変化するかを決める**

この原理はあらゆるところに現れる：
- 🧠 脳（学習 vs 安定性）
- 🌱 細胞（成長 vs 完全性）
- 🏢 組織（革新 vs プロセス）
- 🤖 AIシステム（探索 vs 活用）

もしこの原理が根本的なものなら：
- **自己更新するAI**（いつ学ぶべきか知っている）が作れる
- **動的Transformer**（推論中に適応する）が設計できる
- **内発的動機**を持つシステム（外部報酬不要）が生まれる

---

## 試してみる

```python
from insightspike import geDIG

controller = geDIG(lambda_weight=1.0)

decision = controller.evaluate(
    current_graph=my_graph,
    candidate=new_node
)

if decision.accept:
    my_graph.add(new_node)
```

---

## もっと知る

- [直感的ガイド（数式なし）](intuition_ja.md)
- [論文（日本語）](../paper/geDIG_onegauge_improved_v6.pdf)
- [インタラクティブ Playground](../../examples/playground.py)
- [GitHub](https://github.com/miyauchikazuyoshi/InsightSpike-AI)

---

*geDIG: Graph Edit Distance + Information Gain*
*動的知識グラフのための統一ゲージ*
