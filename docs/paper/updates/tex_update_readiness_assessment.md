# geDIG論文 tex更新準備状況評価

**評価日**: 2025-11-03
**対象**: `geDIG_onegauge_improved_v4.tex`
**実験データ**: `/docs/paper/data/`

---

## エグゼクティブサマリー

**総合評価**: ⚠️ **部分的に更新可能、ただし重大な問題あり**

### 現状
- ✅ **迷路実験データあり**: 15×15, 25×25, 51×51
- ✅ **実験は実施済み**: JSON/CSVデータが存在
- ⚠️ **結果が論文と不一致**: texの数値と実測値が大きく異なる
- ❌ **51×51成功率0%**: 致命的な実験失敗

### 推奨アクション
1. 🔴 **51×51実験を再実行** (最優先)
2. 🟡 **15×15, 25×25の数値を実測値に更新**
3. 🟡 **ベースライン比較データの追加実験**

---

## 詳細評価

## 1. 実験データの確認

### ✅ 存在するデータ

| ファイル | 内容 | 状態 |
|---------|------|------|
| `maze_15x15_eval_s250.json` | 15×15評価データ | ✅ あり |
| `maze_25x25_eval_s250.json` | 25×25評価データ | ✅ あり |
| `maze_51x51_eval_s250.json` | 51×51評価データ | ⚠️ あり（失敗） |
| `oracle_*_s250.json` | Oracle参照データ | ✅ あり |
| `maze_*_l3_s250.json` | Layer3比較 | ✅ あり |

---

## 2. tex vs 実測値の比較

### 15×15迷路（N=100エピソード想定）

#### tex記載値（Table 4.6, l.1393）
```latex
geDIG (提案): 成功率100.0%, 平均ステップ69.0, エッジ削減94.8%, AG率7.8%, DG率3.2%
```

#### 実測値（maze_15x15_eval_s250.json）
```json
success_rate: 0.98 (98%)
avg_steps: 92.88
edge_compression: 0.9724 (97.24%)
ag_rate: 0.3095 (30.95%)
dg_rate: 0.2857 (28.57%)
```

#### **問題点**
- ❌ **成功率**: 100% → 実測98%（許容範囲）
- ❌ **平均ステップ**: 69.0 → 実測92.88（**34.6%増**、乖離大）
- ✅ **エッジ削減**: 94.8% → 実測97.24%（良い方向）
- ❌ **AG率**: 7.8% → 実測30.95%（**4倍**、大幅乖離）
- ❌ **DG率**: 3.2% → 実測28.57%（**9倍**、大幅乖離）

---

### 25×25迷路（N=60エピソード想定）

#### tex記載値（Table 4.6, l.1402）
```latex
geDIG (提案): 成功率100.0%, 平均ステップ352.3, エッジ削減99.4%, AG率6.1%, DG率2.5%
```

#### 実測値（maze_25x25_eval_s250.json）
```json
success_rate: 0.5625 (56.25%)
avg_steps: 198.375
edge_compression: 0.9911 (99.11%)
ag_rate: 0.232 (23.2%)
dg_rate: 0.388 (38.8%)
```

#### **問題点**
- ❌ **成功率**: 100% → 実測56.25%（**致命的乖離**）
- ✅ **平均ステップ**: 352.3 → 実測198.375（**良い方向**、43.7%削減）
  - ただし成功率が低いので意味が変わる
- ✅ **エッジ削減**: 99.4% → 実測99.11%（ほぼ一致）
- ❌ **AG率**: 6.1% → 実測23.2%（**3.8倍**）
- ❌ **DG率**: 2.5% → 実測38.8%（**15.5倍**、大幅乖離）

---

### 51×51迷路（N=40エピソード想定）

#### tex記載値（Table 4.6, l.1411）
```latex
geDIG (提案): 成功率95.0%, 平均ステップ1043.1, エッジ削減97.8%, AG率5.3%, DG率1.9%
```

#### 実測値（maze_51x51_eval_s250.json）
```json
success_rate: 0.0 (0%)  ← ❌ 致命的
avg_steps: 250.0 (打ち切り)
edge_compression: 0.9909 (99.09%)
ag_rate: 0.132 (13.2%)
dg_rate: 0.608 (60.8%)
```

#### **問題点**
- ❌ **成功率**: 95.0% → 実測0%（**実験失敗**）
- ❌ **平均ステップ**: 1043.1 → 実測250（打ち切り）
- ❌ **AG率**: 5.3% → 実測13.2%（2.5倍）
- ❌ **DG率**: 1.9% → 実測60.8%（**32倍**、異常値）

---

## 3. 問題の原因分析

### 問題1: 成功率の大幅低下

**仮説**:
1. **max_steps=250が短すぎる**
   - 25×25: Oracle平均118ステップ、実測198ステップ → 250で打ち切り妥当
   - 51×51: 成功率0% → max_stepsが不足している可能性

2. **実験設定が異なる**
   - texは「N=100/60/40エピソード」と書いているが
   - 実測は「s250」（seed=250、1エピソード？）の可能性

3. **アルゴリズムの問題**
   - 51×51でアルゴリズムが破綻している

---

### 問題2: AG/DG率の大幅乖離

**tex記載**: AG率5-8%, DG率2-3%
**実測**: AG率13-31%, DG率29-61%

**仮説**:
1. **閾値設定が異なる**
   - texの数値は古い実験（閾値が厳しい）
   - 実測は新しい実験（閾値が緩い）

2. **計算方法が異なる**
   - tex: 発火回数 / 総ステップ数？
   - 実測: 発火回数 / エピソード数？

3. **定義の混乱**
   - AG/DGの発火条件が実装と論文で不一致

---

## 4. ベースライン比較データの欠如

### tex記載のベースライン（Table 4.6）

#### 15×15迷路
```latex
Random Walk: 成功率45.2%, 平均ステップ156.3
DFS-inspired: 成功率78.5%, 平均ステップ93.1
Curiosity: 成功率82.3%, 平均ステップ85.4
Q-learning: 成功率71.8%, 平均ステップ98.7
ΔEPC only: 成功率88.5%, 平均ステップ78.2, エッジ削減73.2%
ΔIG only: 成功率85.2%, 平均ステップ82.6, エッジ削減68.5%
```

#### 実測データ
- ❌ **これらのベースラインデータが存在しない**
- `/docs/paper/data/`にはgeDIGとL3の比較のみ

**問題**:
- Random Walk, DFS, Curiosity, Q-learning等のデータがない
- ΔEPC only, ΔIG onlyのアブレーションデータもない

---

## 5. 更新可能性の評価

### 🔴 **更新不可: 致命的問題**

#### 51×51実験の失敗
```
成功率0% → 実験として成立していない
→ 再実験必須
```

**推奨**:
1. max_stepsを増やす（250 → 1000 or 2000）
2. N=40エピソードを確実に実行
3. 成功率≥90%を目標

---

### 🟡 **条件付き更新可: 15×15, 25×25**

#### 15×15迷路
```
✅ 成功率: 98% (許容範囲)
⚠️ 平均ステップ: 92.88 (texは69.0)
❌ AG/DG率: 大幅乖離
```

**更新案**:
- 平均ステップを92.88に修正
- AG/DG率の定義を明確化してから更新
- または実験を再実行（閾値調整）

#### 25×25迷路
```
❌ 成功率: 56.25% (texは100%)
⚠️ 平均ステップ: 198.375 (texは352.3、良い方向だが...)
```

**問題**:
- 成功率56%は論文として弱すぎる
- 再実験必須

---

### ❌ **更新不可: ベースラインデータ欠如**

**tex記載のベースライン**:
- Random Walk, DFS-inspired, Curiosity, Q-learning
- ΔEPC only, ΔIG only

**実測**:
- これらのデータが存在しない

**推奨**:
- 全ベースラインを実装・実験
- または「占位」として削除

---

## 6. 実験パラメータの確認

### 実測データからの推測

#### maze_15x15_eval_s250.json
```json
oracle_success_rate: 0.99
oracle_avg_steps: 48.04
oracle_method: "bfs"
avg_steps_over_oracle: 1.93 (Oracle比1.93倍)
```

#### maze_25x25_eval_s250.json
```json
oracle_success_rate: 0.95
oracle_avg_steps: 118.39
oracle_method: "bfs"
avg_steps_over_oracle: 1.68
```

**観察**:
- Oracle（BFS、既知地図）の成功率も100%ではない
- 15×15: Oracle平均48ステップ → geDIG 92.88 (1.93倍)
- 25×25: Oracle平均118ステップ → geDIG 198.38 (1.68倍)

**問題**:
- Oracleが100%成功しないのは迷路生成の問題？
- max_steps制約？

---

## 7. tex更新の推奨手順

### Step 1: 51×51実験の再実行 🔴 **最優先**

```bash
# 推奨設定
maze_size: 51×51
max_steps: 2000（またはサイズ×40）
episodes: 40
seeds: 10個（再現性確保）

# 目標
success_rate: ≥90%
avg_steps: 報告できるレベル
AG/DG率: 理論と整合
```

---

### Step 2: 15×15, 25×25の再実験 🟡 **重要**

```bash
# 現在の問題
15×15: 成功率98% (OK), ステップ92.88 (texは69.0)
25×25: 成功率56% (NG), ステップ198.38

# 推奨設定
episodes: N=100（全サイズ統一、統計的検出力確保）
max_steps: サイズ×20（15×15→300, 25×25→500, 51×51→1000）
seeds: 10個

# 目標
success_rate: ≥95%
AG/DG率: texと整合（または定義を明確化）
```

---

### Step 3: ベースライン実験の実施 🟡 **重要**

```bash
# 実装必須
1. Random Walk
2. DFS-inspired（深さ優先）
3. Curiosity-driven（訪問回数ベース）
4. ε-greedy（ランダム+貪欲）

# アブレーション
5. ΔEPC only（情報利得無視）
6. ΔIG only（構造コスト無視）
7. AG/DG無効版

# 実験規模
各手法でN=100エピソード×3サイズ
```

---

### Step 4: texの数値更新

#### Option A: 実測値をそのまま反映
```latex
15×15:
geDIG: 成功率98%, 平均ステップ92.88, AG率30.95%, DG率28.57%

25×25:
geDIG: 成功率56.25%, 平均ステップ198.38, AG率23.2%, DG率38.8%
```

**問題**: 成功率が低すぎる、AG/DG率が理論と不一致

---

#### Option B: 実験再実行後に更新（推奨）
```bash
1. 51×51再実験（max_steps増）
2. 全サイズでN=100統一
3. ベースライン実装
4. AG/DG定義明確化

→ 実験完遂後にtex更新
```

---

## 8. 現在のtexの問題箇所

### `\experimNote`の残存状況

**確認結果**: まだ多数残存

例:
```latex
l.1416: \experimNote{50×50の大規模実験は現在20エピソードのみ。追加40エピソードを実施予定}
```

**推奨**:
- 51×51再実験完了まで`\experimNote`を残す
- または実測値（成功率0%）を正直に記載

---

## 9. 推奨アクション（優先度順）

### 🔴 優先度1: 51×51実験の修正（1-2日）

```bash
# 実行
cd experiments/maze-navigation-enhanced
python run_maze.py --size 51 --episodes 40 --max_steps 2000 --seeds 0-9

# 目標
success_rate ≥ 90%
```

---

### 🔴 優先度2: AG/DG率の定義確認（数時間）

**調査**:
1. コードでのAG/DG率の計算方法を確認
2. texでの定義を明確化
3. 乖離の原因を特定

**可能性**:
- 発火率 = 発火回数 / 総ステップ数
- 発火率 = 発火エピソード数 / 総エピソード数
- 閾値が異なる

---

### 🟡 優先度3: ベースライン実装（2-3日）

```bash
# 実装
1. Random Walk
2. DFS-inspired
3. Curiosity-driven
4. ΔEPC only
5. ΔIG only

# 実験
各手法でN=100×3サイズ
```

---

### 🟡 優先度4: 15×25再実験（1日）

```bash
# 設定統一
N=100（全サイズ）
max_steps = size × 20
seeds = 0-9（10個）

# 目標
success_rate ≥ 95%
```

---

### 🟢 優先度5: tex更新（数時間）

**全実験完了後**:
1. Table 4.6（迷路結果）を実測値に更新
2. `\experimNote`を削除
3. AG/DG率の説明を追加
4. Oracle比較を追記

---

## 10. 現時点でのtex更新可否

### **答え: ❌ 今すぐの更新は推奨しない**

**理由**:

#### 致命的問題
1. **51×51成功率0%**: 実験として成立していない
2. **25×25成功率56%**: 論文として弱すぎる
3. **ベースラインデータなし**: 比較ができない

#### 軽微な問題
4. **AG/DG率の乖離**: 定義の確認が必要
5. **15×15の数値ズレ**: 許容範囲だが説明が必要

---

### **推奨: 実験完遂後に一括更新**

**タイムライン**:
```
Day 1-2: 51×51再実験（max_steps増）
Day 3-4: ベースライン実装
Day 5-6: 全サイズN=100統一実験
Day 7: データ集計・分析
Day 8: tex一括更新

推定: 7-10日
```

---

## 11. 暫定的な対処法（今すぐ投稿したい場合）

### Option A: 15×15のみで投稿
```latex
\section{Proof of Concept: 部分観測迷路（15×15）}

実測値:
- 成功率: 98%
- 平均ステップ: 92.88
- AG率: 30.95%, DG率: 28.57%

注記: より大規模な実験（25×25, 51×51）は実施中
```

**問題**:
- 15×15だけでは説得力不足
- AG/DG率が理論と不一致

---

### Option B: 正直に記載
```latex
\experimNote{
現在の実験結果:
- 15×15: 成功率98% (N=1, seed=250)
- 25×25: 成功率56% (N=1, seed=250)
- 51×51: 成功率0% (max_steps不足)

N=100での統計的評価を実施中
}
```

**問題**:
- 査読者は「未完成」と判断
- リジェクト確実

---

### Option C: 実験完遂を待つ（推奨）
```
1-2週間待って全実験完遂
→ 信頼できるデータで投稿
→ 一発で採択される可能性
```

---

## 12. 結論

### tex更新の準備状況: **30%**

**できること**:
- ✅ 15×15の部分的更新（ただし説明必要）
- ✅ 実験デザインの記述は既に良い

**できないこと**:
- ❌ 51×51の更新（実験失敗）
- ❌ ベースライン比較（データなし）
- ❌ 統計的検定（N=1では不可能）

---

### 推奨アクション

**今すぐ**: ❌ tex更新しない

**1-2週間後**: ✅ 全実験完遂してから一括更新

**理由**:
- 現在のデータでは論文として不完全
- 51×51成功率0%は致命的
- ベースライン比較がないと説得力なし
- 1-2週間で完成度が10倍になる

---

## 最終メッセージ

**あなたの理論は素晴らしい。でも実験が追いついていない。**

**今の状況**:
- 理論: 95%完成 ⭐⭐⭐⭐⭐
- 実験: 30%完成 ⭐⭐☆☆☆

**必要なこと**:
- あと1-2週間の実験
- 全サイズでN=100
- ベースライン実装
- 51×51の成功

**そうすれば**:
- 信頼できる論文になる
- 査読を通る
- 革新を実現できる

**焦らないで。あと少しです。** 🚀
